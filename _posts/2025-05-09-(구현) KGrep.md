---
title: (êµ¬í˜„) KGrep
date: 2025-05-09 18:00:00 +0900
modified: 2025-05-09 18:00:00 +0900
categories:
  - êµ¬í˜„
  - ë©€í‹°ìŠ¤ë ˆë“œ
tags:
  - êµ¬í˜„
pin: false
---

## ğŸ“ ì‘ì„± ë°°ê²½
ìµœê·¼ì— ì´ëŸ°ì €ëŸ° ì´ìœ ë¡œ ë¼ì´ë¸Œ ì½”ë”©í…ŒìŠ¤íŠ¸ì— ê´€ì‹¬ì„ ê°–ê²Œ ë˜ì—ˆëŠ”ë°, ì¿ í‚¤ëŸ°ìœ¼ë¡œ ìœ ëª…í•œ ë°ë¸Œì‹œìŠ¤í„°ì¦ˆ ë¼ëŠ” íšŒì‚¬ì— ë¼ì´ë¸Œ ì½”í…Œê°€ ìœ ëª…í•˜ë‹¤ê³   
ì–´ë””ì„œ ë“¤ì–´ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ ì§„í–‰ë˜ëŠ”ì§€ ê¶ê¸ˆí•˜ì—¬ ì°¾ì•„ë³´ë˜ ì¤‘ ë°ë¸Œì‹œìŠ¤í„°ì¦ˆì—ì„œ 22ë…„ë„ì— ì‘ì„±ëœ ê²Œì‹œê¸€ì„ í•˜ë‚˜ ë°œê²¬í•˜ê²Œ ë˜ì—ˆê³ ,   
í•´ë‹¹ ê²Œì‹œê¸€ì— ìˆëŠ” ë¬¸ì œì¤‘ `grep` ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ëŠ” ë¬¸ì œê°€ ìˆì–´ ì£¼ë§ì— ì ê¹ í’€ì–´ë´¤ëŠ”ë° ì¬ë¯¸ìˆê²Œ í’€ì—ˆë˜ ê¸°ì–µì´ ìˆì–´   
í•´ë‹¹ ë‚´ìš©ì— ëŒ€í•´ ì‘ì„±í•´ë³´ë ¤ê³  í•œë‹¤.

ë¬¸ì œì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš© ë° ê¶ê¸ˆí•œ ë‚´ìš©ì€ ì•„ë˜ ë°ë¸Œì‹œìŠ¤í„°ì¦ˆ ê²Œì‹œê¸€ì„ ì°¸ê³ í•˜ë©´ ì¢‹ì„ê²ƒ ê°™ë‹¤.

---
## ğŸ‘“ ì„  3ì¤„ ìš”ì•½
- Kotlinìœ¼ë¡œ `grep`ê³¼ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ë¬¸ìì—´ ê²€ìƒ‰ ë„êµ¬ë¥¼ ë¨¼ì € ì‹±ê¸€ìŠ¤ë ˆë“œë¡œ êµ¬í˜„í•œ í›„ ë©€í‹°ìŠ¤ë ˆë“œë¡œ ê°œì„ í•˜ì˜€ë‹¤.
- íŒŒì¼ íƒìƒ‰ê³¼ ë¬¸ìì—´ ê²€ìƒ‰ì„ ë¶„ë¦¬í•˜ê³  íŒŒì¼ ë‹¨ìœ„ë¡œ ìŠ¤ë ˆë“œë¥¼ í• ë‹¹í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.
- ë©€í‹°ìŠ¤ë ˆë“œ ë²„ì „(KGrepV2)ì€ ì›ë³¸ grepë³´ë‹¤ ì•½ 88% ë¹ ë¥¸ ì†ë„(1.16ì´ˆ vs 9.69ì´ˆ)ë¥¼ ë³´ì˜€ìœ¼ë‚˜, CPU ìì›ì€ ì•½ 8.5ë°°(832% vs 98%) ë” ë§ì´ ì‚¬ìš©í•œë‹¤.

---
## ğŸ”ï¸ ë¬¸ì œ ìš”êµ¬ì‚¬í•­
~~ì¿ í‚¤ëŸ° íšŒì‚¬ ë‹µê²Œ ë¬¸ì œì—ë„ ì¿ í‚¤ê°€ ë“±ì¥ í•˜ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.~~
```
ìš©ê°í•œ ì¿ í‚¤ëŠ” í‰ì†Œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ ë‚´ ë¬¸ìì—´ ê²€ìƒ‰ íˆ´ grepë³´ë‹¤ ë” ë¹ ë¥¸ ì†ë„ë¥¼ ìë‘í•˜ëŠ” ackë‚˜ agê°™ì€ ë‹¤ì–‘í•œ íˆ´ë“¤ì´ ìˆë‹¤ëŠ” ê²ƒì„ ë“¤ì—ˆë‹¤.
ìì‹ ë§Œì˜ dgrepì„ ë§Œë“¤ì–´ ë„ë¦¬ ì„¸ìƒì„ ì´ë¡­ê²Œ í•˜ê³  ì‹¶ë‹¤ê³  ìƒê°í•˜ê²Œ ëœ ìš©ê°í•œ ì¿ í‚¤ëŠ” ê·¸ ì²« ë‹¨ê³„ë¡œ ë©€í‹°ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ëŠ” grepì„ ì§ì ‘ ë§Œë“¤ì–´ë³´ê¸°ë¡œ ê²°ì‹¬í•˜ì˜€ë‹¤.
ì›í•˜ëŠ” ìŠ¤í™ì— ë§ëŠ” íŒŒì¼ ë‚´ ë¬¸ìì—´ ê²€ìƒ‰ íˆ´ì„ ë§Œë“¤ì–´ë³´ì.

ì…ë ¥ í˜•ì‹
 - dgrep {keyword} {relative path}

ì¶œë ¥ í˜•ì‹
 - íŒŒì¼ì˜ ê° lineì— keywordê°€ ìˆëŠ” ê²½ìš°, í•´ë‹¹ íŒŒì¼ê³¼ ì¤„ ë²ˆí˜¸ë¥¼ ì¶œë ¥í•œë‹¤.

ì¡°ê±´
1. relative pathê°€ ë””ë ‰í† ë¦¬ì¸ ê²½ìš° ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤.
2. relative path ë‚´ì— ë˜ ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, ê° ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  íŒŒì¼ì— ëŒ€í•œ ê²€ì‚¬ ë˜í•œ ì§„í–‰í•œë‹¤.
3. ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì´ìš©í•˜ì—¬ ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ì‘ì—…ì„ ì™„ë£Œí•˜ë„ë¡ ì‘ì„±í•œë‹¤.
4. ë™ì¼í•œ íŒŒì¼ì— ëŒ€í•œ ê²€ì‚¬ ê²°ê³¼ëŠ” í•œ ë²ˆì— ì¶œë ¥ë˜ì–´ì•¼ í•œë‹¤.
5. Directory ë‚´ symlinkëŠ” ì—†ë‹¤ê³  ê°€ì •í•œë‹¤.
6. íŒŒì¼ë“¤ì€ ëª¨ë‘ UTF8 ì¸ì½”ë”©ìœ¼ë¡œ ì‘ì„±ëœ TextíŒŒì¼ì´ë¼ê³  ê°€ì •í•œë‹¤.
```
ë§ì´ ì‚¬ìš©ë˜ëŠ” `grep` ì´ë¼ëŠ” íˆ´ ë³´ë‹¤ ì¡°ê¸ˆ ë” ë¹ ë¥´ê²Œ ë¬¸ìì—´ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê°–ì€ `dgrep` ì„ ë§Œë“¤ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ë‹¤.
`grep` ì˜ ë§ì€ ê¸°ëŠ¥ë“¤ ì¤‘ ì‹¬í”Œí•œ `keyword` ì¡°íšŒ ê¸°ëŠ¥ì— ëŒ€í•´ êµ¬í˜„ í•˜ë©´ ë˜ëŠ” ë¬¸ì œë¼ê³  ìƒê°í–ˆë‹¤.

## â¡ï¸ ì ‘ê·¼ ë°©í–¥
`grep` ì€ í‰ì†Œì—ë„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” íˆ´ì´ë¼ ìš”êµ¬ì‚¬í•­ì„ ì´í•´í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì§„ ì•Šì•˜ë‹¤.

ê°€ì¥ ë¨¼ì € ìƒê°í•œ ë¶€ë¶„ì€ ì–´ë–»ê²Œ í•˜ë©´ ë‚´ê°€ ì£¼ë ¥ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ì—ì„œ `grep` ê³¼ ê°™ì€ ë™ì‘ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ìˆ˜ ìˆì„ì§€ì— ëŒ€í•œ ë¶€ë¶„ì´ì˜€ë‹¤.
ë‹¹ì—°íˆ `grep` ë³´ë‹¤ ë¹¨ë¼ì•¼ í•˜ëŠ”ë°, ì²˜ìŒë¶€í„° ë¹ ë¦„ì— ì§‘ì¤‘ì„ í•˜ë©´ ê±°ê¸°ì— ë„ˆë¬´ ë§¤ëª°ë ê²ƒ ê°™ì•„. ìš°ì„  `grep` ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê³  ì†ë„ë¥¼ ê°œì„ ì‹œí‚¤ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í•˜ëŠ”ê²Œ ì¢‹ì„ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆë‹¤.

## âœ¨ êµ¬í˜„
### ì‹±ê¸€ ìŠ¤ë ˆë“œ
`kotlin` ì„ ì‚¬ìš©í•´ì„œ êµ¬í˜„í–ˆë‹¤. ì´ë¦„ë„ ì‚´ì§ ë³€ê²½í•´ë´¤ë‹¤.(dgrep -> kgrep
```kotlin
class KGrep(
    private val keyword: String,
    private val path: String
) { }

fun main(args: Array<String>) {
    val keyword: String = args[0]
    val path: String = args[1]
    val kGrep = KGrep(keyword, path)
}
```
ìš°ì„  `KGrep` ì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í–ˆë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ëŠ” `keyword`ì™€ `path` ë‘ê°œì˜ `properties` ë¥¼ ê°–ê³  ìˆë‹¤.
ê·¸ ì´í›„ `main` í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤¬ë‹¤. `KGrep` ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ í–ˆì„ë•Œ ë™ì‘ì˜ ì£¼ì²´ê°€ ë˜ëŠ” í•¨ìˆ˜ë‹¤.
`Java` ë„ ê·¸ë ‡ê³  `Kotlin` ë„ ê·¸ë ‡ê³  `main` í•¨ìˆ˜ì—ì„œ `args` ì¦‰ `arguments` ë¦¬ìŠ¤íŠ¸ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ”ë° ì´ ë¶€ë¶„ì„ ì ê·¹ í™œìš©í–ˆë‹¤.
ì´ë ‡ê²Œ ì„ ì–¸ì„ í•˜ê²Œë˜ë©´ `jar` íŒŒì¼ì„ ì‹¤í–‰ í–ˆì„ë•Œ ë’¤ì— íŒŒë¦¬ë¯¸í„°ë¥¼ ë„ì–´ì“°ê¸°ë¡œ êµ¬ë¶„í•˜ì—¬ ë„˜ê²¨ì¤„ ìˆ˜ ìˆê²Œ ëœë‹¤.
```bash
java -jar KGrep.jar "keyword" "path"
```
ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ `KGrep.jar` íŒŒì¼ì„ ì‹¤í–‰ ì‹œí‚¬ë•Œ ë’¤ì— `keyword` ì™€ `path` ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆê³ , ì´ê±¸ `main` í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë‹¤ìŒìœ¼ë¡œëŠ” `main`  í•¨ìˆ˜ì—ì„œ í˜¸ì¶œ í•  `KGrep` ë‚´ë¶€ì˜ `search` ë©”ì„œë“œë¥¼ ì„ ì–¸í–ˆë‹¤.
```kotlin
class KGrep(
    private val keyword: String,
    private val path: String
) {
    fun search() {
        val startPath = File(path)
    }
}

// ...
```
ì—¬ê¸°ì„œ ë¶€í„° ê³ ë¯¼ë˜ëŠ” ë¶€ë¶„ì´ ìˆì—ˆëŠ”ë°, ìš”êµ¬ì‚¬í•­ì„ ë³´ë©´ ë””ë ‰í† ë¦¬ ë‚´ë¶€ì— ë˜ ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©°, ë‚´ë¶€ì ìœ¼ë¡œ ë“¤ì–´ìˆëŠ” ë””ë ‰í† ë¦¬ì— ëŒ€í•´ì„œë„ ë¬¸ìì—´ ê²€ìƒ‰ì„ í•´ì•¼í•œë‹¤ëŠ” ë‚´ìš©ì´ ìˆë‹¤.   

ì—¬ê¸°ì„œ ë“¤ì—ˆë˜ ê³ ë¯¼ì´ ìˆì—ˆë‹¤.
1. `path` ì•ˆì— ìˆëŠ” ëª¨ë“  ë””ë ‰í† ë¦¬ì— ëŒ€í•´ `file` íƒìƒ‰ì„ ë¨¼ì € ì§„í–‰í•˜ê³ , í•´ë‹¹ `file` ë“¤ì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ë¬¸ìì—´ ê²€ìƒ‰ì„ í• ì§€
2. `file` íƒìƒ‰ê³¼ ë¬¸ìì—´ ê²€ìƒ‰ì„ í•¨ê»˜ ì§„í–‰í• ì§€

ë‚˜ëŠ” 1ë²ˆ ë°©ë²•ì„ ì„ íƒí•˜ê¸°ë¡œ í–ˆë‹¤. ê°€ì¥ í° ì´ìœ ë¡œëŠ” ê¸€ì„ ì¢€ë” ë³´ë‹¤ë³´ë©´ ë‚˜ì˜¬í…ë° ë©€í‹° ìŠ¤ë ˆë“œì— ëŒ€í•œ ê³ ë ¤ë¥¼ ì•ˆí•  ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.  
ë‹¨ìˆœ `CLI` ë¡¤ í†µí•´ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“œëŠ” ê±°ë¼ë©´ 2ë²ˆ ë°©ë²•ì´ ë” ì í•© í•˜ë‹¤ ìƒê°í–ˆê³  ê·¸ë ‡ê²Œ êµ¬í˜„ì„ í–ˆì„ê²ƒ ê°™ì€ë°   
ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ êµ¬í˜„ì„ ë¹ ë¥´ê³  ê°„ë‹¨í•˜ê²Œ í•˜ê¸° ìœ„í•´ 1ë²ˆ ë°©ë²•ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.

ë‹¨ìˆœ `CLI` ë¥¼ í†µí•´ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì€ 2ë²ˆì„ ì„ íƒí–ˆì„ê±°ë¼ í–ˆëŠ”ë°  ê·¸ ì´ìœ ëŠ” 1ë²ˆ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë¶€ë¶„ì´ ë§ˆìŒì— ê±¸ë ¸ê¸° ë•Œë¬¸ì´ë‹¤.
1. ë””ë ‰í† ë¦¬ ë‚´ë¶€ì˜ ëª¨ë“  `file` ì„ ë©”ëª¨ë¦¬ì— ì ì¬ ì‹œì¼œì•¼ í•œë‹¤.
2. `file` íƒìƒ‰ì´ ëë‚ ë•Œê¹Œì§€ ë¬¸ìì—´ íƒìƒ‰ì„ ì§„í–‰í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê²°ê³¼ë¬¼ ì¶œë ¥ì´ ëŠë¦¬ë‹¤.

ë‹¤ì‹œ ëŒì•„ê°€ì„œ `search` ë©”ì„œë“œì˜ ë‚´ë¶€ë¥¼ í™•ì¸í•´ ë³´ì.
```kotlin
private val filesToProcess: Queue<File> = LinkedList()

fun search() {
    val startPath = File(path)
    collectFiles(startPath)
}

private fun collectFiles(startPath: File) {
    when {
        startPath.isFile -> filesToProcess.add(startPath)
        startPath.isDirectory -> startPath.listFiles()?.forEach { collectFiles(it) }
        else -> println("Cannot process this path: ${startPath.absolutePath}")
    }
}
```
`Queue`ì— ë””ë ‰í† ë¦¬ë¥¼ íƒìƒ‰í•˜ì—¬ `file` ì„ ì €ì¥í•˜ëŠ” `collectFiles` ë©”ì„œë“œë¥¼ ì¶”ê°€í–ˆë‹¤.  
`startPath` ë¥¼ ì¡°ì‚¬í•´ì„œ íŒŒì¼ì´ë¼ë©´ `Queue` ì— ì ì¬ë¥¼, ë””ë ‰í† ë¦¬ë©´ `listFiles` ë©”ì„œë“œë¥¼ í†µí•´ í•´ë‹¹ ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  `file` ë° ë””ë ‰í† ë¦¬ë¥¼ ê°–ê³  ì˜¨ ë’¤ `forEach` ì™€ ì¬ê·€ë¥¼ í†µí•´ `file` ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ í•œë²ˆ íƒìƒ‰í•˜ê²Œëœë‹¤.

ë‹¤ìŒìœ¼ë¡œëŠ” ì €ì¥í•œ `file`ì— ëŒ€í•´ ë¬¸ìì—´ì„ ê²€ìƒ‰í•˜ëŠ” `searchInFile` ë©”ì„œë“œë¥¼ ì¶”ê°€í–ˆë‹¤.
```kotlin
private val results = HashMap<String, List<Pair<Int, String>>>()

private fun searchInFile(file: File) {
    if (!file.isFile || !file.canRead()) {
      return  
    }
    val matchingLines: MutableList<Pair<Int, String>> = mutableListOf()
    file.useLines { lines ->
        lines.forEachIndexed { index, line ->
            if (line.contains(keyword)) {
                matchingLines.add((index + 1) to line.trim())
            }
        }
    }
    if (matchingLines.isNotEmpty()) {
        results[file.path] = matchingLines
    }
}
```
íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ ë°›ì€ `file` ì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ ê²€ì¦ì„ ì§„í–‰ í•œ ë’¤ íŠ¹ì • í¬ë©§ì— ë§ê²Œ ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•˜ê¸° ìœ„í•´ `matchingLines` ë¦¬ìŠ¤íŠ¸ì— ê°’ì„ ì €ì¥í•˜ê³  ìˆë‹¤.  
`kotlin` ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì •ë§ ë‹¤ì–‘í•œ í•¨ìˆ˜ë“¤ì´ ì œê³µë˜ê³  ìˆëŠ”ë° í•´ë‹¹ ë©”ì„œë“œì—ì„œ ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ì†ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í–ˆë‹¤.  
- `useLines` : `file` ì„ `bufferedReader` ë¡œ ë¼ì¸ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ì—¬ ê° ë¼ì¸ ë§ˆë‹¤ `Sequence<String>` í˜•íƒœë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤. ë‚´ë¶€ì—ì„œ `use` ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë³„ë„ë¡œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬ë¥¼ í•  í•„ìš”ê°€ ì—†ì–´ ë§¤ìš° í¸ë¦¬í•˜ë‹¤.
- `forEachIndexed` : ìˆœíšŒë¥¼ í•˜ë©´ì„œ ê°’ê³¼ `index` ë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.
- `contains` : íŠ¹ì • ê°’ì„ í¬í•¨í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.
ìœ„ 3ê°œì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆê³ , íƒìƒ‰ì„ í†µí•´ ê²€ìƒ‰í•˜ê³ ì í•˜ëŠ” ë¬¸ìì—´ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ê²°ê³¼ë¬¼ì„ ë‹´ëŠ” `results` ì— ì €ì¥í•˜ë„ë¡ ë™ì‘í•˜ê³  ìˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚´í´ë³¼ ë©”ì„œë“œëŠ” ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•´ì£¼ëŠ” ë©”ì„œë“œë‹¤.
```kotlin
private fun printResults() {
    results.keys.sorted().forEach { filePath ->
        println("File: $filePath")
        results[filePath]?.forEach { (lineNumber: Int, line: String) ->
            println("Line $lineNumber: $line")
        }
    }
}
```

`searchInFile` ë©”ì„œë“œì—ì„œ `results` ì— ì €ì¥í•œ ê²°ê³¼ë¬¼ì— ëŒ€í•´ ëª¨ë“  íƒìƒ‰ì´ ëë‚˜ê³  í•œë²ˆì— ì¶œë ¥ì„ í•´ì£¼ëŠ” ë©”ì„œë“œì´ë‹¤.
ê²°ê³¼ë¬¼ì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ë³´ì—¬ì§ˆ ìˆ˜ ìˆë„ë¡ `sorted`ë¥¼ í™œìš©í–ˆê³ , `results` ì— ìˆëŠ” `Paire<Int, String>` ì— ëŒ€í•´ `lineNumber` ì™€ `line` ì„ ì¶œë ¥í•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤.

ì—¬ê¸°ê¹Œì§€ê°€ ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ëŠ” `KGrep` ì˜ êµ¬í˜„ ë‚´ìš©ì´ë‹¤. ì´ê±¸ ì•ìœ¼ë¡œ `KGrepV1` ìœ¼ë¡œ ëª…ì¹­í•˜ì.  
ê·¸ëŸ¼ ì´ì œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì.
ë¨¼ì € ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ëª‡ê°€ì§€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.
1. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
2. êµ¬í˜„í•œ `KGrepV1` ì„ ì»´íŒŒì¼í•˜ê³  `.jar` íŒŒì¼ë¡œ ë§Œë“¤ì.
3. ë§Œë“  `.jar` íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ”ë° `time` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì–´ëŠì •ë„ ì‹œê°„ì´ ì†Œìš” ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.
4. `grep` ê³¼ `KGrepV1` ì„ ê°ê° ì‹¤í–‰ ì‹œí‚¤ê³  ì„±ëŠ¥ì„ ë¹„êµí•´ë³´ì.

í…ŒìŠ¤íŠ¸ ë°ì´í„°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.(ì—¬ëŸ¬ íŒŒì¼ ì¤‘ ì´ 6ê°œì˜ íŒŒì¼ë§Œì´ "keyword" ë¼ëŠ” ë‹¨ì–´ë¥¼ ê°–ê³  ìˆë‹¤.)
```
test-data/
â”œâ”€â”€ test.json
â”œâ”€â”€ dir_0/
â”‚   â”œâ”€ file_0.txt # 100ë§Œì¤„ì˜ í…ìŠ¤íŠ¸ ë°ì´í„°
â”‚   ...
â”‚   â””â”€ file_9.txt
...
â””â”€â”€ dir_9/
     â”œâ”€ file_0.txt
     ...
     â””â”€ file_9.txt
```

ì„±ëŠ¥ ë¹„êµ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```bash
kotlinc KGrepV1.kt -include-runtime -d KGrepV1.jar # .jar íŒŒì¼ ìƒì„±
time java -jar KGrepV1.jar "keyword" "test-data"   # time ì„ í†µí•œ ì„±ëŠ¥ ì¸¡ì •

# result (m3 pro 12 core 12 thread, RAM 18GB ê¸°ì¤€)
## KGrepV1
File: test-data/dir_1/file_0.txt
Line 501: Line 500 in file_0.txt of dir_1. Contains keyword.
File: test-data/dir_3/file_7.txt
Line 501: Line 500 in file_7.txt of dir_3. Contains keyword.
File: test-data/dir_4/file_2.txt
Line 501: Line 500 in file_2.txt of dir_4. Contains keyword.
File: test-data/dir_5/file_5.txt
Line 501: Line 500 in file_5.txt of dir_5. Contains keyword.
File: test-data/dir_8/file_0.txt
Line 501: Line 500 in file_0.txt of dir_8. Contains keyword.
File: test-data/test.json
Line 2: "name": "keyword"
java -jar KGrepV1.jar "keyword" "test-data"  3.37s user 0.81s system 95% cpu 4.365 total

## grep
test-data/dir_5/file_5.txt:Line 500 in file_5.txt of dir_5. Contains keyword.
test-data/dir_4/file_2.txt:Line 500 in file_2.txt of dir_4. Contains keyword.
test-data/dir_3/file_7.txt:Line 500 in file_7.txt of dir_3. Contains keyword.
test-data/test.json:  "name": "keyword"
test-data/dir_1/file_0.txt:Line 500 in file_0.txt of dir_1. Contains keyword.
test-data/dir_8/file_0.txt:Line 500 in file_0.txt of dir_8. Contains keyword.
grep --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn,.idea,.tox,.venv,venv  8.81s user 0.36s system 99% cpu 9.245 total
```

`KGrepV1` ê³¼ `grep` ë¹„êµ ê²°ê³¼

| í•­ëª©          | KGrepV1.jar                  | grep                              |
|---------------|------------------------------|------------------------------------|
| ì‚¬ìš©ì ì‹œê°„ (user) | 3.37s                        | 8.81s                              |
| ì‹œìŠ¤í…œ ì‹œê°„ (system) | 0.81s                        | 0.36s                              |
| CPU ì‚¬ìš©ë¥      | 95%                          | 99%                                |
| ì´ ì†Œìš” ì‹œê°„    | 4.365s                       | 9.245s                             |

`KGrepV1` ì´ ë¦¬ì†ŒìŠ¤ëŠ” ì ê²Œ ì‚¬ìš©í•˜ì§€ë§Œ, ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.
`KGrepV1` ê³¼ `grep` ëª¨ë‘ `CPU` ë¥¼ `100%` ë‚´ì™¸ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ëª¨ìŠµì´ë‹¤.(ì¤‘ìš”!)

ì´ì œ ì—¬ê¸°ì— ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ë„ì…í•˜ì—¬ ì„±ëŠ¥ì„ ê°œì„ ì‹œì¼œ ë³´ì.

`KGrepV1` ì˜ ì „ì²´ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤. ê°„ë‹¨í•œ ì˜ˆì™¸ ì²˜ë¦¬ë“±ì„ ì¶”ê°€í–ˆë‹¤.
```kotlin
package com.crispinlab.kgrep

import java.io.File
import java.util.concurrent.ConcurrentHashMap
import java.util.concurrent.ConcurrentLinkedQueue
import java.util.concurrent.ExecutorService
import java.util.concurrent.Executors
import java.util.concurrent.TimeUnit
import kotlin.system.measureTimeMillis

class KGrep(
    private val keyword: String,
    private val path: String
) {
    private val results = ConcurrentHashMap<String, List<Pair<Int, String>>>()

    private val filesToProcess = ConcurrentLinkedQueue<File>()

    private val threadPool: ExecutorService = Executors.newFixedThreadPool(
        Runtime.getRuntime().availableProcessors()
    )

    fun search() {
        val startPath = File(path)

        if (!startPath.exists()) {
            println("Path does not exist: $path")
            return
        }

        collectFiles(startPath)

        val time: Long = measureTimeMillis {
            val fileCount: Int = filesToProcess.size
            for (count: Int in 0 until fileCount) {
                val file: File = filesToProcess.poll() ?: break
                threadPool.submit { searchInFile(file) }
            }
            threadPool.shutdown()
            threadPool.awaitTermination(1, TimeUnit.HOURS)
        }
        printResults()
        println("Search completed in $time ms")
    }

    private fun collectFiles(startPath: File) {
        when {
            startPath.isFile -> filesToProcess.add(startPath)
            startPath.isDirectory -> startPath.listFiles()?.forEach { collectFiles(it) }
            else -> println("Cannot process this path: ${startPath.absolutePath}")
        }
    }

    private fun searchInFile(file: File) {
        try {
            if (!file.isFile || !file.canRead()) return
            val matchingLines: MutableList<Pair<Int, String>> = mutableListOf()
            file.useLines { lines ->
                lines.forEachIndexed { index, line ->
                    if (line.contains(keyword)) {
                        matchingLines.add((index + 1) to line.trim())
                    }
                }
            }
            if (matchingLines.isNotEmpty()) {
                results[file.path] = matchingLines
            }
        } catch (e: Exception) {
            System.err.println("Error processing file ${file.path}: ${e.message}")
        }
    }

    private fun printResults() {
        results.keys.sorted().forEach { filePath ->
            println("File: $filePath")
            results[filePath]?.forEach { (lineNumber: Int, line: String) ->
                println("Line $lineNumber: $line")
            }
        }
    }
}

fun main(args: Array<String>) {
    if (args.size < 2) {
        println("Usage: kgrep <keyword> <relative path>")
        return
    }

    val keyword: String = args[0]
    val path: String = args[1]

    val kGrep = KGrep(keyword, path)
    kGrep.search()
}
```

### ë©€í‹° ìŠ¤ë ˆë“œ
ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ êµ¬í˜„í•œ `KGrepV1` ì—ì„œ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¹ ë¥´ê²Œ ì‚´í´ë³´ì.

ìš°ì„  ì‚¬ìš©í•˜ë˜ ìë£Œêµ¬ì¡°ë“¤ì„ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•˜ë„ë¡ ì§€ì›í•´ì£¼ëŠ” ìë£Œêµ¬ì¡°ë¡œ ë³€ê²½í–ˆë‹¤.
```kotlin
private val results = ConcurrentHashMap<String, List<Pair<Int, String>>>()
private val filesToProcess = ConcurrentLinkedQueue<File>()
```
ì½”í‹€ë¦°ì—ì„œ ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë° ë‚˜ëŠ” `java` ì—ì„œ ì§€ì›í•˜ë©´ì„œ `kotlin` ì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ `ExcutorService api` ë¥¼ ì‚¬ìš©í–ˆë‹¤. ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•¨ì— ìˆì–´ ìŠ¤ë ˆë“œ ê´€ë¦¬ê°€ ì¤‘ìš”í•œë° ë‚´ë¶€ì ìœ¼ë¡œ ê·¸ê±¸ í•´ì£¼ë©´ì„œë„ `thread pool` ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.  

`thread pool` ì˜ ê°œìˆ˜ëŠ” í˜„ì¬ `runtime` ì—ì„œì˜ ì‚¬ìš©ê°€ëŠ¥í•œ `CPU` ì½”ì–´ ìˆ˜ ë§Œí¼ ì§€ì •í•´ì¤¬ë‹¤.
```kotlin
private val threadPool: ExecutorService = Executors.newFixedThreadPool(
    Runtime.getRuntime().availableProcessors()
)
```

ê·¸ë¦¬ê³  ìœ„ì— ì„ ì–¸í•œ `thread pool` ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `search` ë©”ì„œë“œë¥¼ ë³€ê²½í•´ì¤¬ë‹¤.  
ì—¬ê¸°ì„œë„ ê³ ë¯¼ë˜ëŠ” ë¶€ë¶„ì´ ìˆì—ˆëŠ”ë°, `thread` ë¥¼ ì–´ë–¤ ë‹¨ìœ„ë¡œ í• ë‹¹í•  ê²ƒì¸ê°€ ì— ëŒ€í•œ ê³ ë¯¼ì´ì˜€ë‹¤.   
ì—¬ê¸°ì„œ ë‚˜ëŠ” êµ³ì´ í•˜ë‚˜ì˜ íŒŒì¼ì„ ì—¬ëŸ¬ `thread` ì—ì„œ ì¡°íšŒí•  í•„ìš”ëŠ” ì—†ì„ê±°ë¼ ìƒê°í–ˆë‹¤. ë¬¼ë¡  í° íŒŒì¼ì´ ë§ì€ ê²½ìš°ë¼ë©´ í•˜ë‚˜ì˜ íŒŒì¼ì„ ë‘ê°œ ì´ìƒì˜ `thread` ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒìƒ‰í•˜ëŠ” ë°©ë²•ë„ ìˆì„ê²ƒ ê°™ì€ë° ì¼ë‹¨ êµ¬í˜„ ìì²´ê°€ ë§¤ìš° ë³µì¡í•  ìˆ˜ ìˆê³ (ë™ì‹œì„± ì²˜ë¦¬ ë“±), ì²˜ìŒì—ëŠ” ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ êµ¬í˜„í•˜ëŠ”ê²Œ ë¨¼ì €ë¼ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì´ë‹¤.  
ê·¸ë˜ì„œ ë‚˜ëŠ” `file` ë‹¨ìœ„ë¡œ `thread` ë¥¼ í• ë‹¹í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆë‹¤.  
ì´ë¯¸ `file` ëª©ë¡ì„ `Queue` ì— ë‹´ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ `Queue` ì—ì„œ `file` ì„ í•˜ë‚˜ì”© êº¼ë‚´ë©´ì„œ í•´ë‹¹ `file` ì„ íƒìƒ‰í• ë•Œ `thread` ë¥¼ ê°ê° í• ë‹¹ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì—…í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í–ˆê¸° ë•Œë¬¸ì´ë‹¤.  
ì•„ë˜ëŠ” ì„ íƒí•œ ë°©ì‹ëŒ€ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ ë³€ê²½í•œ `search` ë©”ì„œë“œë‹¤.
```kotlin
fun search() {
    val startPath = File(path)

    if (!startPath.exists()) {
        println("Path does not exist: $path")
        return
    }

    collectFiles(startPath)

    val fileCount: Int = filesToProcess.size
    for (count: Int in 0 until fileCount) {
        val file: File = filesToProcess.poll() ?: break
        threadPool.submit { searchInFile(file) }
    }
    threadPool.shutdown()
    threadPool.awaitTermination(1, TimeUnit.HOURS)
    printResults()
}
```

ë™ì‘ ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ë‹¤.
1. `threadPool.submit` ì„ í†µí•´ `searchInFile` ë©”ì„œë“œë¥¼ ê°ê°ì˜ `thread` ì—ì„œ ë™ì‘í•˜ë„ë¡ í• ë‹¹í•œë‹¤.
2. `threadPool.shutdown` ì„ í†µí•´ ëª¨ë“  `thread pool` ì— ìˆëŠ” `thread` ê°€ ì‘ì—…ì„ ë§ˆì¹ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.
3. ë§Œì•½ì„ ëŒ€ë¹„í•˜ì—¬ `threadPool.awaitTermination` ì„ í†µí•´ `timeout` ì„ ì„¤ì •
4. `threadPool` ì— ìˆëŠ” ëª¨ë“  `thread` ê°€ ì‘ì—…ì„ ë§ˆì¹˜ë©´ ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•œë‹¤.

ê·¸ëŸ¼ ì´ì œ `KGrepV2` ì— ëŒ€í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ ë³´ì.
í…ŒìŠ¤íŠ¸ ë°ì´í„°ì™€ ì¸¡ì • ë°©ì‹ì„ `KGrepV1` ì„ ì¸¡ì • í–ˆì„ë•Œì™€ ê°™ë‹¤.

```bash
kotlinc KGrepV2.kt -include-runtime -d KGrepV2.jar # .jar íŒŒì¼ ìƒì„±
time java -jar KGrepV2.jar "keyword" "test-data"   # time ì„ í†µí•œ ì„±ëŠ¥ ì¸¡ì •

# result (m3 pro 12 core 12 thread, RAM 18GB ê¸°ì¤€)
## KGrepV1
File: test-data/dir_1/file_0.txt
Line 501: Line 500 in file_0.txt of dir_1. Contains keyword.
File: test-data/dir_3/file_7.txt
Line 501: Line 500 in file_7.txt of dir_3. Contains keyword.
File: test-data/dir_4/file_2.txt
Line 501: Line 500 in file_2.txt of dir_4. Contains keyword.
File: test-data/dir_5/file_5.txt
Line 501: Line 500 in file_5.txt of dir_5. Contains keyword.
File: test-data/dir_8/file_0.txt
Line 501: Line 500 in file_0.txt of dir_8. Contains keyword.
File: test-data/test.json
Line 2: "name": "keyword"
java -jar KGrepV1.jar "keyword" "test-data"  3.33s user 0.81s system 94% cpu 4.376 total

## KGrepV2
File: test-data/dir_1/file_0.txt
Line 501: Line 500 in file_0.txt of dir_1. Contains keyword.
File: test-data/dir_3/file_7.txt
Line 501: Line 500 in file_7.txt of dir_3. Contains keyword.
File: test-data/dir_4/file_2.txt
Line 501: Line 500 in file_2.txt of dir_4. Contains keyword.
File: test-data/dir_5/file_5.txt
Line 501: Line 500 in file_5.txt of dir_5. Contains keyword.
File: test-data/dir_8/file_0.txt
Line 501: Line 500 in file_0.txt of dir_8. Contains keyword.
File: test-data/test.json
Line 2: "name": "keyword"
Search completed in 1091 ms
java -jar KGrepV2.jar "keyword" "test-data"  8.26s user 1.40s system 832% cpu 1.162 total

## grep
test-data/dir_5/file_5.txt:Line 500 in file_5.txt of dir_5. Contains keyword.
test-data/dir_4/file_2.txt:Line 500 in file_2.txt of dir_4. Contains keyword.
test-data/dir_3/file_7.txt:Line 500 in file_7.txt of dir_3. Contains keyword.
test-data/test.json:  "name": "keyword"
test-data/dir_1/file_0.txt:Line 500 in file_0.txt of dir_1. Contains keyword.
test-data/dir_8/file_0.txt:Line 500 in file_0.txt of dir_8. Contains keyword.
grep --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn,.idea,.tox,.venv,venv  9.12s user 0.41s system 98% cpu 9.685 total
```

`KGrepV1`,`KGrepV2`, `grep` ë¹„êµ ê²°ê³¼

| í•­ëª©               | KGrepV1.jar        | KGrepV2.jar        | grep              |
|--------------------|--------------------|---------------------|--------------------|
| ì‚¬ìš©ì ì‹œê°„ (user)   | 3.33s              | 8.26s               | 9.12s              |
| ì‹œìŠ¤í…œ ì‹œê°„ (system) | 0.81s              | 1.40s               | 0.41s              |
| CPU ì‚¬ìš©ë¥           | 94%               | 832%                | 98%                |
| ì´ ì†Œìš” ì‹œê°„         | 4.376s             | 1.162s              | 9.685s             |

`KGrepV2` ê°€ ì†ë„ ì¸¡ë©´ì—ì„œëŠ” ë§¤ìš° ë¹ ë¥¸ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.  
ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— `CPU` ë¥¼ 100% ì´ìƒ ì‚¬ìš©í•˜ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.  
í™•ì‹¤íˆ ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë‹ˆ ì†ë„ì ì¸ ë¶€ë¶„ì—ì„œëŠ” ë§¤ìš° ê°œì„ ëœê±¸ ë³¼ ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ, ë¦¬ì†ŒìŠ¤ëŠ” ê·¸ ë§Œí¼ ì‚¬ìš©í•˜ì§€ë§Œ..

`KGrepV2` ì˜ ì „ì²´ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```kotlin
package com.crispinlab.kgrep

import java.io.File
import java.util.concurrent.ConcurrentHashMap
import java.util.concurrent.ConcurrentLinkedQueue
import java.util.concurrent.ExecutorService
import java.util.concurrent.Executors
import java.util.concurrent.TimeUnit
import kotlin.system.measureTimeMillis

class KGrepV2(
    private val keyword: String,
    private val path: String
) {
    private val results = ConcurrentHashMap<String, List<Pair<Int, String>>>()

    private val filesToProcess = ConcurrentLinkedQueue<File>()

    private val threadPool: ExecutorService = Executors.newFixedThreadPool(
        Runtime.getRuntime().availableProcessors()
    )

    fun search() {
        val startPath = File(path)

        if (!startPath.exists()) {
            println("Path does not exist: $path")
            return
        }

        collectFiles(startPath)

        val time: Long = measureTimeMillis {
            val fileCount: Int = filesToProcess.size
            for (count: Int in 0 until fileCount) {
                val file: File = filesToProcess.poll() ?: break
                threadPool.submit { searchInFile(file) }
            }
            threadPool.shutdown()
            threadPool.awaitTermination(1, TimeUnit.HOURS)
        }
        printResults()
        println("Search completed in $time ms")
    }

    private fun collectFiles(startPath: File) {
        when {
            startPath.isFile -> filesToProcess.add(startPath)
            startPath.isDirectory -> startPath.listFiles()?.forEach { collectFiles(it) }
            else -> println("Cannot process this path: ${startPath.absolutePath}")
        }
    }

    private fun searchInFile(file: File) {
        try {
            if (!file.isFile || !file.canRead()) return
            val matchingLines: MutableList<Pair<Int, String>> = mutableListOf()
            file.useLines { lines ->
                lines.forEachIndexed { index, line ->
                    if (line.contains(keyword)) {
                        matchingLines.add((index + 1) to line.trim())
                    }
                }
            }
            if (matchingLines.isNotEmpty()) {
                results[file.path] = matchingLines
            }
        } catch (e: Exception) {
            System.err.println("Error processing file ${file.path}: ${e.message}")
        }
    }

    private fun printResults() {
        results.keys.sorted().forEach { filePath ->
            println("File: $filePath")
            results[filePath]?.forEach { (lineNumber: Int, line: String) ->
                println("Line $lineNumber: $line")
            }
        }
    }
}

fun main(args: Array<String>) {
    if (args.size < 2) {
        println("Usage: kgrep <keyword> <relative path>")
        return
    }

    val keyword: String = args[0]
    val path: String = args[1]

    val kGrep = KGrepV2(keyword, path)
    kGrep.search()
}
```

---
## ğŸ’¡ ë§ˆë¬´ë¦¬
ì˜¤ëŠ˜ì€ ë¼ì´ë¸Œ ì½”ë”© í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ ë¬¸ì œë¥¼ í’€ì–´ë´¤ë‹¤.  
ì›¹ ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” `API` ë¥¼ ë§ì´ êµ¬í˜„í•˜ì§€, ì´ë ‡ê²Œ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•  ì¼ì´ ìƒê°ë³´ë‹¤ ë§ì§€ ì•Šì€ë° ì˜¤ëœë§Œì— ì´ëŸ°ì €ê±´ ê³ ë¯¼ì„ í•˜ë©´ì„œ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•˜ë‹ˆ ì¬ë¯¸ìˆì—ˆë‹¤.  
ì´ë²ˆ ê¸°íšŒì— íŒŒì¼ ì²˜ë¦¬ ë° ë©€í‹° ìŠ¤ë ˆë“œì— ëŒ€í•´ ë‹¤ë¤„ë³¼ ìˆ˜ ìˆì–´ ê²½í—˜ì ìœ¼ë¡œ ë§ì´ ë„ì›€ì´ ë˜ì—ˆë‹¤.  

ì†ë„ê°€ ë¹ ë¥´ë‹¤ê³  í•´ì„œ ë¬´ì¡°ê±´ ì¢‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì•„ë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ë¥¼ í•œì •ì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” í™˜ê²½ì—ì„œ `KGrepV2` ëŠ” ê·¸ë¦¬ ì¢‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ í•  ìˆ˜ ì—†ì„ê±°ë‹¤. ë‹¤ë§Œ ê¸°ì¡´ì— ë§ì´ ì‚¬ìš©í•˜ë˜ `grep` ì˜ ì†ë„ì ì¸ í•œê³„ë¥¼ ì–´ë–»ê²Œ ê·¹ë³µí•  ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´ ë¬¸ì œë¥¼ í†µí•´ ì ì‹œë‚˜ë§ˆ ìƒê°í•  ìˆ˜ ìˆì–´ì„œ ë„ˆë¬´ ì¢‹ì•˜ë‹¤.  

ê¸°íšŒê°€ ëœë‹¤ë©´ í•´ë‹¹ ë¬¸ì œë¥¼ ë‹¤ë¥¸ ê°œë°œìë¶„ë“¤ì€ ì–´ë–»ê²Œ í’€ì—ˆëŠ”ì§€ ë‚´ê°€ êµ¬í˜„í•œ ë‚´ìš©ê³¼ëŠ” ì–´ë–¤ ë¶€ë¶„ì´ ë‹¤ë¥¼ì§€ ë¹„êµí•´ë³´ê³  ì‹¶ë‹¤.

---
## ğŸ”– REFERENCE
- [ë°ë¸Œì‹œìŠ¤í„°ì¦ˆ ì„œë²„ ì§êµ°ì€ ì™œ ì½”ë”© ë©´ì ‘ì„ ë³¼ê¹Œ?](https://tech.devsisters.com/posts/server-position-coding-test/)
